.container
  .row
    .col-lg-3.col-sm-4
      %a{href: "#"}
        = image_tag avatar_url(@user, 300), :class => "img-thumbnail center-block"
        -# TODO Link to avatar upload page
    .col-lg-9.col-sm-8
      %h1 #{@user.username}
      - if @user.admin?
        %span.label.label-info.tags Admin
.container
  .row
    .col-lg-3.col-sm-4
      %ul.list-group
        %li.list-group-item.text-right
          %span.pull-left
            %strong Full Name:
          [Full name]
          -# TODO Fill in full name here
        %li.list-group-item.text-right
          %span.pull-left
            %strong Date Joined:
          #{@user.created_at.to_date}
        %li.list-group-item.text-right
          %span.pull-left
            %strong Last Login:
          #{last_login(@user)}
        %li.list-group-item.text-right
          %span.pull-left
            %strong Email:
          #{@user.email}
        %li.list-group-item.text-center
          [Social media links]
          -# TODO Put social media links here
      .panel.panel-default
        .panel-heading
          %strong Communities
        .panel-body
          - if @communities.any?
            - @communities.each do |community|
              %a.btn.btn-default.top-margin{href: community_path(community.id)} #{community.name}
          - else
            None
    .col-lg-9.col-sm-8
      %ul.nav.nav-pills{role: "tablist"}
        %li.active{role: "presentation"}
          %a{href: "#projects", data: {toggle: 'tab'}}
            %span.glyphicon.glyphicon-folder-close
              Projects
        %li{role: "presentation"}
          %a{href: "#funds", data: {toggle: 'tab'}}
            %span.glyphicon.glyphicon-heart
              Funded
        %li{role: "presentation"}
          %a{href: "#profile", data: {toggle: 'tab'}}
            %span.glyphicon.glyphicon-user
              Profile
        %li{role: "presentation"}
          %a{href: "#feedbacks", data: {toggle: 'tab'}}
            %span.glyphicon.glyphicon-comment
              Feedback
        
      .tab-content
        .tab-pane.fade.in.active{id: "projects"}
          %ul.list-group
            - if @projects.any?
              - @projects.each do |project|
                %li.list-group-item
                  .media
                    .media-left
                      = link_to "Project Picture", project_path(project.id)
                    .media-body
                      .media-heading
                        %strong #{project.name}
                      #{project.description}
            - else
              %li.list-group-item #{@user.username} hasn't started any projects.
        .tab-pane.fade{id: "funds"}
          %ul.list-group
            - if @funds.any?
              - @funds.each do |fund|
                %li.list-group-item
                  .media
                    .media-left
                      = link_to "Project Picture", project_path(fund.project_id)
                    .media-body
                      .media-heading
                        %strong #{fund.project.name}
                      $#{fund.amount}
            - else
              %li.list-group-item #{@user.username} hasn't funded any projects.
        .tab-pane.fade{id: "profile"}
          .panel.panel-default
            .panel-heading About Me
            .panel-body
              [Insert user description]
              -# TODO Put user's description here
          .panel.panel-default
            .panel-heading Location
            .panel-body
              %p Hometown: #{@user.hometown or "Not specified"}
              %p Homestate: #{@user.homestate or "Not specified"}
        .tab-pane.fade{id: "feedbacks"}
          %ul.list-group
            - if @feedbacks.any?
              - @feedbacks.each do |feedback|
                %li.list-group-item
                  .media
                    .media-left
                      = link_to image_tag(avatar_url(feedback.user, 100)), users_path(feedback.user.username)
                    .media-body
                      .media-heading
                        %strong #{feedback.user.username}
                      #{feedback.description}
            - else
              %li.list-group-item #{@user.username} hasn't received any feedback.